<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUKindaHomeless - Apartment Finder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            text-align: center;
        }

        .stat-card h3 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #666;
            font-size: 0.9em;
        }

        .filters {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .filters h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .filter-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group label {
            display: block;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .filter-group select,
        .filter-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .filter-group select:focus,
        .filter-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .listings {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .listing-card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s;
        }

        .listing-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .listing-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
        }

        .listing-price {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .listing-address {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .listing-details {
            padding: 20px;
        }

        .listing-detail-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .listing-detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: #666;
            font-weight: 600;
        }

        .detail-value {
            color: #333;
        }

        .value-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-top: 10px;
        }

        .great-deal {
            background: #4caf50;
            color: white;
        }

        .fair-price {
            background: #2196f3;
            color: white;
        }

        .overpriced {
            background: #ff9800;
            color: white;
        }

        .listing-link {
            display: block;
            text-align: center;
            padding: 15px;
            background: #f5f5f5;
            color: #667eea;
            text-decoration: none;
            font-weight: 600;
            transition: background 0.3s;
        }

        .listing-link:hover {
            background: #667eea;
            color: white;
        }

        .no-results {
            text-align: center;
            padding: 60px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .no-results h2 {
            color: #667eea;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .listings {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè† RUKindaHomeless</h1>
            <p class="subtitle">Find Your Perfect Apartment in New Brunswick, NJ</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="totalListings">0</h3>
                <p>Total Listings</p>
            </div>
            <div class="stat-card">
                <h3 id="avgRent">$0</h3>
                <p>Average Rent</p>
            </div>
            <div class="stat-card">
                <h3 id="minRent">$0</h3>
                <p>Starting From</p>
            </div>
            <div class="stat-card">
                <h3 id="greatDeals">0</h3>
                <p>Great Deals</p>
            </div>
        </div>

        <div class="filters">
            <h2>üîç Filter Apartments</h2>
            <div class="filter-group">
                <div>
                    <label for="bedroomsFilter">Bedrooms</label>
                    <select id="bedroomsFilter">
                        <option value="">All</option>
                        <option value="0">Studio</option>
                        <option value="1">1 BR</option>
                        <option value="2">2 BR</option>
                        <option value="3">3 BR</option>
                        <option value="5">5 BR</option>
                    </select>
                </div>
                <div>
                    <label for="minPrice">Min Price</label>
                    <input type="number" id="minPrice" placeholder="e.g., 1500">
                </div>
                <div>
                    <label for="maxPrice">Max Price</label>
                    <input type="number" id="maxPrice" placeholder="e.g., 3000">
                </div>
                <div>
                    <label for="sourceFilter">Source</label>
                    <select id="sourceFilter">
                        <option value="">All Sources</option>
                    </select>
                </div>
            </div>
            <button onclick="applyFilters()">Apply Filters</button>
            <button onclick="resetFilters()" style="background: #666; margin-left: 10px;">Reset</button>
        </div>

        <div id="listings" class="listings"></div>
    </div>

    <script>
        // All apartment listings data loaded from CSV
        const ALL_LISTINGS = [
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 929,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-special-1000-off-first/7898515613.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 3,
    "bathrooms": 2.0,
    "sqft": 929,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-special-1000-off-first/7898515613.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-special-1000-off-first/7898515166.html",
    "source": "craigslist"
  },
  {
    "address": "620 Somerset St, New Brunswick, NJ 08901",
    "rent": 3100.0,
    "bedrooms": 3,
    "bathrooms": 2.0,
    "sqft": 1071,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-fully-renovated-house-for/7898393039.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-affordable-bedroom/7898338014.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-affordable-bedroom/7898337416.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-bedroom-apartemnt/7898047400.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-1000-off-first-month-rent/7898046270.html",
    "source": "craigslist"
  },
  {
    "address": "1 CHESTER CIR, NEW BRUNSWICK CITY, NJ 08901",
    "rent": 1890.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 620,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-leaves-are-falling-so-are/7890429512.html",
    "source": "craigslist"
  },
  {
    "address": "1 CHESTER CIR, NEW BRUNSWICK CITY, NJ 08901",
    "rent": 1900.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 531,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-move-in-deal-free-1st/7897167695.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/d/new-brunswick-1000-off-your-first-month/7896693909.htmll",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 1,
    "bathrooms": 2.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/7896692864.html",
    "source": "craigslist"
  },
  {
    "address": "300 Block Townsend St Unit 1, New Brunswick, NJ 08901",
    "rent": 2500.0,
    "bedrooms": 1,
    "bathrooms": 2.0,
    "sqft": 800,
    "url": "https://cnj.craigslist.org/apa/7896620000.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/7896405992.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/7896407095.html",
    "source": "craigslist"
  },
  {
    "address": "515 Bound Brook Rd, Dunellen, NJ 08812",
    "rent": 1800.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 900,
    "url": "https://cnj.craigslist.org/apa/d/dunellen-bedroom-bathroom-apartment/7890532205.html",
    "source": "craigslist"
  },
  {
    "address": "7 Livingston Ave New Brunswick, NJ 08901",
    "rent": 2397.0,
    "bedrooms": 0,
    "bathrooms": 1.0,
    "sqft": 439,
    "url": "https://www.trulia.com/building/premiere-residences-7-livingston-ave-new-brunswick-nj-08901-2750788862",
    "source": "Premiere Residences"
  },
  {
    "address": "7 Livingston Ave New Brunswick, NJ 08901",
    "rent": 2827.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 653,
    "url": "https://www.trulia.com/building/premiere-residences-7-livingston-ave-new-brunswick-nj-08901-2750788862",
    "source": "Premiere Residences"
  },
  {
    "address": "7 Livingston Ave New Brunswick, NJ 08901",
    "rent": 3000.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 670,
    "url": "https://www.trulia.com/building/premiere-residences-7-livingston-ave-new-brunswick-nj-08901-2750788862",
    "source": "Premiere Residences"
  },
  {
    "address": "7 Livingston Ave New Brunswick, NJ 08901",
    "rent": 3547.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1075,
    "url": "https://www.trulia.com/building/premiere-residences-7-livingston-ave-new-brunswick-nj-08901-2750788862",
    "source": "Premiere Residences"
  },
  {
    "address": "7 Livingston Ave New Brunswick, NJ 08901",
    "rent": 3761.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 899,
    "url": "https://www.trulia.com/building/premiere-residences-7-livingston-ave-new-brunswick-nj-08901-2750788862",
    "source": "Premiere Residences"
  },
  {
    "address": "Central Ave, Edison, NJ 08817",
    "rent": 2950.0,
    "bedrooms": 3,
    "bathrooms": 2.0,
    "sqft": 1234,
    "url": "https://cnj.craigslist.org/apa/7896511389.html",
    "source": "craigslist"
  },
  {
    "address": "130 Park Gate Dr, Edison, NJ 08820, Edison, NJ 08820",
    "rent": 3600.0,
    "bedrooms": 2,
    "bathrooms": 2.5,
    "sqft": 1800,
    "url": "https://cnj.craigslist.org/apa/7889707687.html",
    "source": "craigslist"
  },
  {
    "address": "510 Hamilton St, Somerset, NJ 08873",
    "rent": 2550.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 975,
    "url": "https://cnj.craigslist.org/apa/7895049953.html",
    "source": "craigslist"
  },
  {
    "address": "510 Hamilton St, Somerset, NJ 08873",
    "rent": 1800.0,
    "bedrooms": 0,
    "bathrooms": 1.0,
    "sqft": 600,
    "url": "https://cnj.craigslist.org/apa/7895107384.html",
    "source": "craigslist"
  },
  {
    "address": "510 Hamilton St, Somerset, NJ 08873",
    "rent": 2200.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 750,
    "url": "https://cnj.craigslist.org/apa/7895109251.html",
    "source": "craigslist"
  },
  {
    "address": "3 Seymour Ave, Edison, NJ 08817",
    "rent": 3950.0,
    "bedrooms": 5,
    "bathrooms": 2.0,
    "sqft": 1650,
    "url": "https://cnj.craigslist.org/apa/7899178475.html",
    "source": "craigslist"
  },
  {
    "address": "221 Denison St, Highland Park, NJ 08904",
    "rent": 2256.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 1200,
    "url": "https://cnj.craigslist.org/apa/7899008891.html",
    "source": "craigslist"
  },
  {
    "address": "316 Magnolia Street, Highland Park, NJ 08904",
    "rent": 1895.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 714,
    "url": "https://cnj.craigslist.org/apa/7898853953.html",
    "source": "craigslist"
  },
  {
    "address": "400 Colonial Gardens, Piscataway, NJ 08854.",
    "rent": 2295.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 800,
    "url": "https://cnj.craigslist.org/apa/7893893611.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1993.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/7895860066.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/7895858238.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/7894812730.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/7894810911.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 767,
    "url": "https://cnj.craigslist.org/apa/7894196989.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1992.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 939,
    "url": "https://cnj.craigslist.org/apa/7894119176.html",
    "source": "craigslist"
  },
  {
    "address": "33 Paul Robeson Blvd, New Brunswick, NJ 08901",
    "rent": 1663.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 727,
    "url": "https://cnj.craigslist.org/apa/7893472428.html",
    "source": "craigslist"
  },
  {
    "address": "912 Somerset St, New Brunswick, NJ 08901",
    "rent": 2150.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 900,
    "url": "https://cnj.craigslist.org/apa/7892839699.html",
    "source": "craigslist"
  },
  {
    "address": "110 Somerset St, New Brunswick, NJ 08901",
    "rent": 3069.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1113,
    "url": "https://www.redfin.com/NJ/New-Brunswick/The-Vue/apartment/49701471",
    "source": "Redfin"
  },
  {
    "address": "205 Easton Ave, New Brunswick, NJ 08901",
    "rent": 2450.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 866,
    "url": "https://www.redfin.com/NJ/New-Brunswick/205-Easton-Ave-08901/apartment/179451238",
    "source": "Redfin"
  },
  {
    "address": "33 Mine St Unit 2, New Brunswick, NJ 08901",
    "rent": 1059.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 133,
    "url": "https://www.redfin.com/NJ/New-Brunswick/33-Mine-St-08901/unit-2/apartment/188891009",
    "source": "Redfin"
  },
  {
    "address": "33 Mine St Unit 4, New Brunswick, NJ 08901",
    "rent": 1342.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 249,
    "url": "https://www.redfin.com/NJ/New-Brunswick/33-Mine-St-08901/unit-4/apartment/188891358",
    "source": "Redfin"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3912.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1113,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "Redfin"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3918.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 962,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "Redfin"
  },
  {
    "address": "60 Paterson St New Brunswick, NJ 08901",
    "rent": 2125.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 810,
    "url": "https://www.trulia.com/building/skyline-tower-60-paterson-st-new-brunswick-nj-08901-1002115118",
    "source": "Skyline Tower"
  },
  {
    "address": "60 Paterson St New Brunswick, NJ 08901",
    "rent": 2150.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 915,
    "url": "https://www.trulia.com/building/skyline-tower-60-paterson-st-new-brunswick-nj-08901-1002115118",
    "source": "Skyline Tower"
  },
  {
    "address": "60 Paterson St New Brunswick, NJ 08901",
    "rent": 2665.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 1040,
    "url": "https://www.trulia.com/building/skyline-tower-60-paterson-st-new-brunswick-nj-08901-1002115118",
    "source": "Skyline Tower"
  },
  {
    "address": "60 Paterson St New Brunswick, NJ 08901",
    "rent": 2800.0,
    "bedrooms": 2,
    "bathrooms": 1.0,
    "sqft": 917,
    "url": "https://www.trulia.com/building/skyline-tower-60-paterson-st-new-brunswick-nj-08901-1002115118",
    "source": "Skyline Tower"
  },
  {
    "address": "60 Paterson St New Brunswick, NJ 08901",
    "rent": 2800.0,
    "bedrooms": 2,
    "bathrooms": 1.5,
    "sqft": 1139,
    "url": "https://www.trulia.com/building/skyline-tower-60-paterson-st-new-brunswick-nj-08901-1002115118",
    "source": "Skyline Tower"
  },
  {
    "address": "434 Livingston Ave New Brunswick, NJ 08901",
    "rent": 1749.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 500,
    "url": "https://www.trulia.com/building/livingston-terrace-434-livingston-ave-new-brunswick-nj-08901-1002385134",
    "source": "Trulia"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 2501.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 810,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 2548.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 856,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 2742.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 878,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 3061.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1144,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 3191.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1248,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "11 Us Highway 1 New Brunswick, NJ 08901",
    "rent": 3096.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1463,
    "url": "https://www.trulia.com/building/the-edge-at-raritan-heights-11-us-highway-1-new-brunswick-nj-08901-2749343387",
    "source": "The Edge"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3069.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 773,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "The Vue"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3099.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 790,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "The Vue"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3259.0,
    "bedrooms": 1,
    "bathrooms": 1.0,
    "sqft": 843,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "The Vue"
  },
  {
    "address": "110 Somerset St New Brunswick, NJ 08901",
    "rent": 3891.0,
    "bedrooms": 2,
    "bathrooms": 2.0,
    "sqft": 1113,
    "url": "https://www.trulia.com/building/the-vue-110-somerset-st-new-brunswick-nj-08901-1001522305",
    "source": "The Vue"
  }
];

        // Function to calculate value category
        function getValueCategory(rent, bedrooms, avgRentByBR) {
            const avgRent = avgRentByBR[bedrooms] || rent;
            const ratio = rent / avgRent;
            
            if (ratio <= 0.85) return 'great-deal';
            if (ratio >= 1.15) return 'overpriced';
            return 'fair-price';
        }

        function getValueLabel(category) {
            const labels = {
                'great-deal': 'Great Deal',
                'fair-price': 'Fair Price',
                'overpriced': 'Overpriced'
            };
            return labels[category] || 'Fair Price';
        }

        function calculateStats() {
            if (ALL_LISTINGS.length === 0) return;
            
            const totalRent = ALL_LISTINGS.reduce((sum, l) => sum + l.rent, 0);
            const avgRent = totalRent / ALL_LISTINGS.length;
            const minRent = Math.min(...ALL_LISTINGS.map(l => l.rent));
            
            // Calculate average rent by bedroom count
            const rentByBR = {};
            const countByBR = {};
            
            ALL_LISTINGS.forEach(listing => {
                if (!rentByBR[listing.bedrooms]) {
                    rentByBR[listing.bedrooms] = 0;
                    countByBR[listing.bedrooms] = 0;
                }
                rentByBR[listing.bedrooms] += listing.rent;
                countByBR[listing.bedrooms]++;
            });
            
            const avgRentByBR = {};
            Object.keys(rentByBR).forEach(br => {
                avgRentByBR[br] = rentByBR[br] / countByBR[br];
            });
            
            // Calculate great deals
            let greatDeals = 0;
            ALL_LISTINGS.forEach(listing => {
                const category = getValueCategory(listing.rent, listing.bedrooms, avgRentByBR);
                if (category === 'great-deal') greatDeals++;
                listing.valueCategory = category;
                listing.avgRentForBR = avgRentByBR[listing.bedrooms];
            });
            
            // Update stats display
            document.getElementById('totalListings').textContent = ALL_LISTINGS.length;
            document.getElementById('avgRent').textContent = '$' + Math.round(avgRent).toLocaleString();
            document.getElementById('minRent').textContent = '$' + minRent.toLocaleString();
            document.getElementById('greatDeals').textContent = greatDeals;
            
            // Populate source filter
            const sources = [...new Set(ALL_LISTINGS.map(l => l.source))].sort();
            const sourceFilter = document.getElementById('sourceFilter');
            sourceFilter.innerHTML = '<option value="">All Sources</option>';
            sources.forEach(source => {
                const option = document.createElement('option');
                option.value = source;
                option.textContent = source;
                sourceFilter.appendChild(option);
            });
        }

        function displayListings(listings) {
            const container = document.getElementById('listings');
            
            if (listings.length === 0) {
                container.innerHTML = `
                    <div class="no-results">
                        <h2>No apartments found</h2>
                        <p>Try adjusting your filters</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = listings.map(listing => `
                <div class="listing-card">
                    <div class="listing-header">
                        <div class="listing-price">$${listing.rent.toLocaleString()}/mo</div>
                        <div class="listing-address">${listing.address}</div>
                    </div>
                    <div class="listing-details">
                        <div class="listing-detail-row">
                            <span class="detail-label">Bedrooms</span>
                            <span class="detail-value">${listing.bedrooms === 0 ? 'Studio' : listing.bedrooms + ' BR'}</span>
                        </div>
                        <div class="listing-detail-row">
                            <span class="detail-label">Bathrooms</span>
                            <span class="detail-value">${listing.bathrooms} BA</span>
                        </div>
                        <div class="listing-detail-row">
                            <span class="detail-label">Square Feet</span>
                            <span class="detail-value">${listing.sqft.toLocaleString()} sqft</span>
                        </div>
                        <div class="listing-detail-row">
                            <span class="detail-label">Price/sqft</span>
                            <span class="detail-value">$${(listing.rent / listing.sqft).toFixed(2)}</span>
                        </div>
                        <div class="listing-detail-row">
                            <span class="detail-label">Source</span>
                            <span class="detail-value">${listing.source}</span>
                        </div>
                        <div style="text-align: center;">
                            <span class="value-badge ${listing.valueCategory}">${getValueLabel(listing.valueCategory)}</span>
                        </div>
                    </div>
                    <a href="${listing.url}" target="_blank" class="listing-link">View Original Listing ‚Üí</a>
                </div>
            `).join('');
        }

        function applyFilters() {
            const bedrooms = document.getElementById('bedroomsFilter').value;
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;
            const source = document.getElementById('sourceFilter').value;
            
            const filtered = ALL_LISTINGS.filter(listing => {
                if (bedrooms && listing.bedrooms !== parseInt(bedrooms)) return false;
                if (listing.rent < minPrice || listing.rent > maxPrice) return false;
                if (source && listing.source !== source) return false;
                return true;
            });
            
            displayListings(filtered);
        }

        function resetFilters() {
            document.getElementById('bedroomsFilter').value = '';
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            document.getElementById('sourceFilter').value = '';
            displayListings(ALL_LISTINGS);
        }

        // Initialize when page loads
        window.addEventListener('DOMContentLoaded', () => {
            console.log(`Loaded ${ALL_LISTINGS.length} apartment listings`);
            calculateStats();
            displayListings(ALL_LISTINGS);
        });
    </script>
</body>
</html>